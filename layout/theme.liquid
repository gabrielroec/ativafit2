<!doctype html>

<html class="no-js" lang="{{ request.locale.iso_code }}">
  <head>
    <!-- Google Tag Manager -->
    <script>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-NG7LT26D');
  </script>

    <!-- End Google Tag Manager -->
    {% render 'visually_io_sdk' %}

    <script
      src="https://analytics.ahrefs.com/analytics.js"
      data-key="lqzucNIXjItSH4hJMLxs4w"
      async></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, height=device-height, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="theme-color" content="{{ settings.accent_color }}">

      <!-- Favicon Direct Implementation -->
    <link
      rel="icon"
      type="image/png"
      href="https://cdn.shopify.com/s/files/1/2623/4904/files/favicon_23160412-809a-4224-a424-c0dc14ced21d.png?v=1754166228">
    <link
      rel="shortcut icon"
      href="https://cdn.shopify.com/s/files/1/2623/4904/files/favicon_23160412-809a-4224-a424-c0dc14ced21d.png?v=1754166228"
      type="image/png">
    <link rel="apple-touch-icon" href="https://cdn.shopify.com/s/files/1/2623/4904/files/favicon_23160412-809a-4224-a424-c0dc14ced21d.png?v=1754166228">

    {%- capture seo_page_title -%}
      {%- if request.page_type == 'search' and search.terms != blank -%}
        {{ search.terms | split: ' AND ' | last | split: 'product_type:' | last }} - {{ shop.name }}
      {%- else -%}
        {{ page_title }}{% if current_tags %}{% assign meta_tags = current_tags | join: ', ' %} &ndash; {{ 'general.meta.tags' | t: tags: meta_tags }}{% endif %}{% if current_page != 1 %} &ndash; {{ 'general.meta.page' | t: page: current_page }}{% endif %}
      {%- endif -%}
    {%- endcapture -%}
    <title>{{- seo_page_title -}}</title>

    {%- if page_description -%}
      <meta name="description" content="{{ page_description | escape }}">
    {%- endif -%}
    {% render 'social-meta-tags' %}
    <link rel="canonical" href="{{ canonical_url }}">


      {%- comment -%}Few prefech to increase performance on commonly used third-parties{%- endcomment -%}
    <link
      rel="preload"
      as="style"
      href="{{ 'theme.min.css' | asset_url }}">
    <link
      rel="preload"
      as="script"
      href="{{ 'theme.min.js' | asset_url }}">
    <link rel="preconnect" href="https://cdn.shopify.com">
    <link rel="preconnect" href="https://fonts.shopifycdn.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.cdnfonts.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="dns-prefetch" href="https://productreviews.shopifycdn.com">
    <link rel="dns-prefetch" href="https://ajax.googleapis.com">
    <link rel="dns-prefetch" href="https://maps.googleapis.com">
    <link rel="dns-prefetch" href="https://maps.gstatic.com">


    {% render 'css-variables' %}

    <link
      rel="preload"
      as="style"
      href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
      <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap">
    </noscript>
    <link
      rel="preload"
      as="style"
      href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
      <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap">
    </noscript>

    <link
      rel="preload"
      as="style"
      href="https://fonts.cdnfonts.com/css/inter"
      onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
      <link rel="stylesheet" href="https://fonts.cdnfonts.com/css/inter">
    </noscript>
    <!-- Hotjar Tracking Code for https://www.ativafit.com/ -->
    <script>
          (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:6368517,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
          })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>
    <!-- Accessibility Code for "ativafit.com" -->
    <script>
      /*

      Want to customize your button? visit our documentation page:

      https://login.equalweb.com/custom-button.taf

      */
      window.interdeal = {
          "sitekey": "26a097e78c2453c54615d0bed623f613",
          "Position": "Left",
          "domains": {
        "js": "https://cdn.equalweb.com/",
        "acc": "https://access.equalweb.com/"
          },
          "Menulang": "EN",
          "btnStyle": {
        "vPosition": [
            "80%",
            "80%"
        ],
        "scale": [
            "0.5",
            "0.5"
        ],
        "color": {
            "main": "#000000",
            "second": "#ffffff"
        },
        "icon": {
            "outline": false,
            "type": 1,
            "shape": "circle"
        }
          }
      };
      (function(doc, head, body){
          var coreCall             = doc.createElement('script');
          coreCall.src             = interdeal.domains.js + 'core/5.1.2/accessibility.js';
          coreCall.defer           = true;
          coreCall.integrity       = 'sha512-PUyQFF3HFjRiVfjOiFFu+RTc0nGmLV5FN3CVw8zWFK6pVbWPAEKy9X2bTUn10GNu1EbxN56MuWu0P8ZHC6xv3Q==';
          coreCall.crossOrigin     = 'anonymous';
          coreCall.setAttribute('data-cfasync', true );
          body? body.appendChild(coreCall) : head.appendChild(coreCall);
      })(document, document.head, document.body);
    </script>

    <link rel="stylesheet" href="{{ 'global.css' | asset_url }}">
    <link rel="stylesheet" href="{{ 'theme.min.css' | asset_url }}">
    {% render 'microdata-schema' %}

    <script>
      // This allows to expose several variables to the global scope, to be used in scripts
      window.theme = {
        pageType: {{ request.page_type | json }},
        cartCount: {{ cart.item_count | json }},
        moneyFormat: {{ shop.money_format | json }},
        moneyWithCurrencyFormat: {{ shop.money_with_currency_format | json }},
        currencyCodeEnabled: {{ settings.currency_code_enabled | json }},
        showDiscount: {{ settings.show_discount | json }},
        discountMode: {{ settings.discount_mode | json }},
        cartType: {{ settings.cart_type | json }}
      };

      window.routes = {
        rootUrl: {{ routes.root_url | json }},
        rootUrlWithoutSlash: {% if routes.root_url == '/' %}''{% else %}{{ routes.root_url | json }}{% endif %},
        cartUrl: {{ routes.cart_url | json }},
        cartAddUrl: {{ routes.cart_add_url | json }},
        cartChangeUrl: {{ routes.cart_change_url | json }},
        searchUrl: {{ routes.search_url | json }},
        productRecommendationsUrl: {{ routes.product_recommendations_url | json }}
      };

      window.languages = {
        productRegularPrice: {{ 'product.general.regular_price' | t | json }},
        productSalePrice: {{ 'product.general.sale_price' | t | json }},
        collectionOnSaleLabel: {{ 'collection.product.discount_html' | t | json }},
        productFormUnavailable: {{ 'product.form.unavailable' | t | json }},
        productFormAddToCart: {{ 'product.form.add_to_cart' | t | json }},
        productFormPreOrder: {{ 'product.form.pre_order' | t | json }},
        productFormSoldOut: {{ 'product.form.sold_out' | t | json }},
        productAdded: {{ 'product.form.added' | t | json }},
        productAddedShort: {{ 'product.form.added_short' | t | json }},
        shippingEstimatorNoResults: {{ 'cart.shipping_estimator.no_results_title' | t | json }},
        shippingEstimatorOneResult: {{ 'cart.shipping_estimator.one_result_title' | t | json }},
        shippingEstimatorMultipleResults: {{ 'cart.shipping_estimator.multiple_results_title' | t | json }},
        shippingEstimatorErrors: {{ 'cart.shipping_estimator.errors' | t | json }}
      };

      document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
    </script>

    {%- if request.page_type == 'customers/addresses' -%}
      <script src="{{ 'shopify_common.js' | shopify_asset_url }}" defer></script>
      <script src="{{ 'customer_area.js' | shopify_asset_url }}" defer></script>
    {%- endif -%}

    <script src="{{ 'theme.min.js' | asset_url }}" defer></script>
    <script src="{{ 'custom.min.js' | asset_url }}" defer>
  </script>
    {%- comment -%} Cart Drawer - Novo (Shopify 2.0) {%- endcomment -%}
    {%- comment -%} CSS e JS são carregados pela própria section cart-drawer.liquid {%- endcomment -%}
    <script>
      // Detect user region via IP geolocation
      window.shopifyCountryCode = '';
      
      // Fetch user country from IP
      fetch('https://ipapi.co/json/')
        .then(res => res.json())
        .then(data => {
          if (data.country_code) {
            window.shopifyCountryCode = data.country_code;
            console.log("Country detected:", window.shopifyCountryCode);
            // Update cart drawer if already open
            if (window.cartDrawer && window.cartDrawer.isOpen) {
              window.cartDrawer.loadCartData();
            }
          }
        })
        .catch(() => {
          // Fallback: try Shopify localization
          {% if localization.country.iso_code %}
            window.shopifyCountryCode = '{{ localization.country.iso_code }}';
            console.log("Country from Shopify:", window.shopifyCountryCode);
            if (window.cartDrawer && window.cartDrawer.isOpen) {
              window.cartDrawer.loadCartData();
            }
          {% endif %}
        });
    </script>

    <div id="cart-payment-terms" style="display:none;">
      {% form 'cart', cart %}
        {{ form | payment_terms }}
      {% endform %}
    </div>

    <!-- Barlow overrides -->
    {% comment %} <link rel="stylesheet" href="{{ 'barlow-override.min.css' | asset_url }}"> {% endcomment %}
    <link rel="stylesheet" href="{{ 'barlow-override.css' | asset_url }}">

      <!-- Typography Supreme Rules -->
    <link rel="stylesheet" href="{{ 'typography-supreme.css' | asset_url }}">

    {%- if request.page_type != 'cart' -%}
      <script>
        (function () {
          window.onpageshow = function() {
            // We force re-freshing the cart content onpageshow, as most browsers will serve a cache copy when hitting the
            // back button, which cause staled data
            document.documentElement.dispatchEvent(new CustomEvent('cart:refresh', {
              bubbles: true,
              detail: {scrollToTop: false}
            }));
          };
        })();
      </script>
    {%- endif -%}

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-11366836138"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'AW-11366836138');
    </script>

    <!-- Twitter conversion tracking base and event code -->
    <script>
      !function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
      },s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='https://static.ads-twitter.com/uwt.js',
      a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
      twq('config','oee6t');
    </script>
    <!-- End Twitter conversion tracking base code -->

    <!-- Google Tag Manager -->
    <!--
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-M985N39');</script>
    -->
    <!-- End Google Tag Manager -->

    <!-- Google Tag Manager New -->
    <script>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-PXMZSFK');
    </script>
    <!-- End Google Tag Manager -->
    <!-- Hotjar Tracking Code for https://www.ativafit.com/ -->
    <script>
      (function(h,o,t,j,a,r){
          h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
          h._hjSettings={hjid:3882714,hjsv:6};
          a=o.getElementsByTagName('head')[0];
          r=o.createElement('script');r.async=1;
          r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
          a.appendChild(r);
      })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>

    <!-- Reddit Pixel -->
    <script>
      !function(w,d){if(!w.rdt){var p=w.rdt=function(){p.sendEvent?p.sendEvent.apply(p,arguments):p.callQueue.push(arguments)};p.callQueue=[];var t=d.createElement("script");t.src="https://www.redditstatic.com/ads/pixel.js",t.async=!0;var s=d.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}}(window,document);rdt('init','t2_w2f9doa7');rdt('track', 'PageVisit');
  </script>
    <!-- DO NOT MODIFY UNLESS TO REPLACE A USER IDENTIFIER -->
    <!-- End Reddit Pixel -->
    {% render 'digismoothie-candyrack' %}
    <link
      rel="preload"
      as="style"
      href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
      <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    </noscript>
    <link
      rel="preload"
      as="style"
      href="{{ 'swiper.min.css' | asset_url }}"
      onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
    <link rel="stylesheet" href="{{ 'swiper.min.css' | asset_url }}">
    </noscript>
    <script src="{{ 'jquery.min.js' | asset_url }}" defer></script>
    <script src="{{ 'swiper.min.js' | asset_url }}" defer></script>


    <meta name="google-site-verification" content="MMiNaiXOwNEI9BAzMcFWKtn93PFIXJS6nFRcAl-4Pwo" />

    {% include 'pagefly-app-header' %}
    {{ content_for_header }}
  </head>

  <style>
    .boom-launcher.loloyal-launcher-wrapper {
      position: fixed;
      bottom: 60px !important;
      left: 70px !important;
      z-index: 2147483647;
    }
    button#bon-loyalty-btn {
      height: 50px !important;
      right: -211px !important;
      top: 60%;
      /* transform: translateY(10px) !important; */
      width: 236px;
    }
    /* Técnica 1: Múltiplos !important com seletores mais específicos */
    .rivyoTestimonialItem {
      background-color: #fff !important;
      background: #fff !important;
    }

    /* Técnica 2: Seletores mais específicos */
    div.rivyoTestimonialItem,
    .rivyoTestimonialItem[style*="background"],
    .rivyoTestimonialItem[style*="background-color"] {
      background-color: #fff !important;
      background: #fff !important;
    }

    /* Técnica 3: Usando atributo style com máxima especificidade */
    .rivyoTestimonialItem[style] {
      background-color: #fff !important;
      background: #fff !important;
    }

    /* Técnica 4: Seletores aninhados para máxima especificidade */
    body .rivyoTestimonialItem,
    html body .rivyoTestimonialItem {
      background-color: #fff !important;
      background: #fff !important;
    }

    /* Bundle Builder H3 Styles */
    .bndlr-product-title-h3 {
      font-family: 'Barlow'
      , sans-serif !important;

      font-size: 16px !important;
      line-height: 1.4 !important;
      color: #333 !important;
      margin: 0 !important;
      text-decoration: none !important;
      display: block !important;
    }

    .bndlr-product-title-h3:hover {
      color: #EB701F !important;
      text-decoration: underline !important;
    }

    /* Garantir que os estilos do Bundle Builder sejam mantidos */
    .bndlr-product-title-h3.bndlr-product-title {
    ;
    /* Herda todos os estilos da classe original */
  }
  </style>

  <!-- Técnica 5: JavaScript para forçar estilo com máxima prioridade -->
  <script>
      // Função para forçar background branco nos elementos Rivyo
      function forceRivyoBackground() {
        const rivyoElements = document.querySelectorAll('.rivyoTestimonialItem');
        rivyoElements.forEach(element => {
          // Remove estilos inline existentes
          element.removeAttribute('style');
          // Força o estilo com setProperty para máxima prioridade
          element.style.setProperty('background-color', '#fff', 'important');
          element.style.setProperty('background', '#fff', 'important');
        });
      }
      
      // Executa imediatamente
      forceRivyoBackground();
      
      // Executa quando o DOM estiver carregado
      document.addEventListener('DOMContentLoaded', forceRivyoBackground);
      
      // Executa quando a página estiver totalmente carregada
      window.addEventListener('load', forceRivyoBackground);
      
      // Executa a cada 500ms para pegar elementos carregados dinamicamente
      setInterval(forceRivyoBackground, 500);
      
      // Observer para detectar mudanças no DOM
      const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          if (mutation.type === 'childList') {
            forceRivyoBackground();
          }
        });
      });
      
      // Inicia o observer
      observer.observe(document.body, {
        childList: true,
        subtree: true
      });
  </script>

  {%- if request.path == '/products/ripple-half-ball-balance-ball' -%}
    <style>
      .rivyoReviewWidget.rivyoWidgetTrigger {
        display: none !important;
      }
    </style>
  {%- endif -%}

  <body class="Ativafit--v4 {% if settings.animation_image_zoom %}features--animate-zoom{% endif%} template-{{ request.page_type | handle }} {% if request.page_type contains '/' %}template-{{ request.page_type | split: '/' | last | handle }}{% endif %}" data-instant-intensity="viewport">
    <!-- Google Tag Manager (noscript) -->
    <noscript>
      <iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-NG7LT26D"
        height="0"
        width="0"
        style="display:none;visibility:hidden"></iframe>
  </noscript>
    <!-- End Google Tag Manager (noscript) -->
    {% section 'tom-custom-fonts' %}
    {%- comment -%}Common SVG definitions that we are re-using in several places{%- endcomment -%}
    <svg class="visually-hidden">
      <linearGradient id="rating-star-gradient-half">
        <stop offset="50%" stop-color="var(--product-review-star-color)" />
        <stop
          offset="50%"
          stop-color="rgba(var(--text-color-rgb), .4)"
          stop-opacity="0.4" />
      </linearGradient>
    </svg>

    <a href="#main" class="visually-hidden skip-to-content">{{ 'general.accessibility.skip_to_content' | t }}</a>
    <span class="loading-bar"></span>

    {%- sections 'header-group' -%}
    {%- sections 'overlay-group' -%}

    <main id="main" role="main">
      {{ content_for_layout }}
    </main>

    {%- sections 'footer-group' -%}

    {%- comment -%} Cart Drawer - Shopify 2.0 {%- endcomment -%}
    {% section 'cart-drawer' %}

    {%- comment -%} One-Click Upsell - Works on all pages {%- endcomment -%}
    {% section 'one-click-upsell' %}

    <ul hidden>
      <li id="a11y-new-window-message">{{ 'general.accessibility.new_window' | t }}</li>
    </ul>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" defer></script>
    <script>
              try {
              setTimeout(function () {
                window.__pagefly_helper_store__ &&
                  window.__pagefly_helper_store__.subscribe(function (res) {
                $.getJSON('/cart.json').then(cart => {
                  document.documentElement.dispatchEvent(new CustomEvent('product:added', {
                  bubbles: true,
                  detail: {
                    quantity: 1
                  }
                }));
                  $('.header__cart-count').text(cart.item_count)
                                  });
      });
              }, 2500);
            } catch (e) {
              console.warn(e);
            }
    </script>

    <!-- Google Tag Manager (noscript) New -->
    <noscript>
      <iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-PXMZSFK"
        height="0"
        width="0"
        style="display:none;visibility:hidden"></iframe>
  </noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Google Tag Manager (noscript) -->
    <!--
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M985N39"  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    -->
    <!-- End Google Tag Manager (noscript) -->


    {%- comment -%} Cart Notification Component (deprecated - usando cart drawer agora) {%- endcomment -%}
    {% render 'cart-notification' %}

    {%- comment -%} Klaviyo Popup Cleaner Script {%- endcomment -%}
    <script src="{{ 'klaviyo-popup-cleaner.js' | asset_url }}" defer></script>

    {%- comment -%} Error Handler Script {%- endcomment -%}
    <script src="{{ 'error-handler.js' | asset_url }}" defer></script>

    {%- comment -%} Bundle Builder Title Converter Script {%- endcomment -%}
    <script>
      /**
       * Bundle Builder Title Converter
       * Converte títulos de produtos do Bundle Builder para elementos H3 semânticos
       */
      (function() {
        'use strict';
        
        // Configurações
        const CONFIG = {
          // Seletor para encontrar títulos de produtos do Bundle Builder
          titleSelector: '.bndlr-product-title',
          // Seletor para encontrar H2 vazios do Bundle Builder
          emptyH2Selector: '.bndlr-bundle-title',
          // Classe CSS para manter estilos visuais
          titleClass: 'bndlr-product-title',
          // Atributos a serem preservados
          preserveAttributes: ['href', 'target', 'title', 'class'],
          // Delay para aguardar carregamento dinâmico
          checkInterval: 500,
          // Máximo de tentativas
          maxAttempts: 20
        };
        
        let attempts = 0;
        
        /**
         * Converte um elemento de título para H3
         * @param {HTMLElement} titleElement - Elemento do título
         */
        function convertTitleToH3(titleElement) {
          if (!titleElement || titleElement.tagName === 'H3') {
            return;
          }
          
          try {
            // Cria o novo elemento H3
            const h3Element = document.createElement('h3');
            
            // Preserva atributos importantes
            CONFIG.preserveAttributes.forEach(attr => {
              if (titleElement.hasAttribute(attr)) {
                h3Element.setAttribute(attr, titleElement.getAttribute(attr));
              }
            });
            
            // Adiciona classe específica para Bundle Builder
            h3Element.classList.add('bndlr-product-title-h3');
            
            // Copia o conteúdo (texto e elementos filhos)
            h3Element.innerHTML = titleElement.innerHTML;
            
            // Substitui o elemento original
            titleElement.parentNode.replaceChild(h3Element, titleElement);
            
            console.log('Bundle Builder: Título convertido para H3:', h3Element.textContent.trim());
            
          } catch (error) {
            console.warn('Bundle Builder: Erro ao converter título:', error);
          }
        }
        
        /**
         * Remove elementos H2 vazios do Bundle Builder
         * @param {HTMLElement} h2Element - Elemento H2 vazio
         */
        function removeEmptyH2(h2Element) {
          if (!h2Element || h2Element.tagName !== 'H2') {
            return;
          }
          
          try {
            // Verifica se o H2 está vazio (sem texto ou apenas espaços)
            const textContent = h2Element.textContent.trim();
            
            if (textContent === '' || textContent.length === 0) {
              // Remove o elemento vazio
              h2Element.remove();
              console.log('Bundle Builder: H2 vazio removido');
            }
            
          } catch (error) {
            console.warn('Bundle Builder: Erro ao remover H2 vazio:', error);
          }
        }
        
        /**
         * Processa todos os elementos do Bundle Builder
         */
        function processBundleElements() {
          const titleElements = document.querySelectorAll(CONFIG.titleSelector);
          const emptyH2Elements = document.querySelectorAll(CONFIG.emptyH2Selector);
          
          let hasElements = false;
          
          // Processa títulos de produtos
          if (titleElements.length > 0) {
            console.log(`Bundle Builder: Encontrados ${titleElements.length} títulos para converter`);
            titleElements.forEach(convertTitleToH3);
            hasElements = true;
          }
          
          // Processa H2 vazios
          if (emptyH2Elements.length > 0) {
            console.log(`Bundle Builder: Encontrados ${emptyH2Elements.length} H2 para verificar`);
            emptyH2Elements.forEach(removeEmptyH2);
            hasElements = true;
          }
          
          // Se não encontrou elementos, tenta novamente
          if (!hasElements) {
            attempts++;
            if (attempts < CONFIG.maxAttempts) {
              setTimeout(processBundleElements, CONFIG.checkInterval);
            }
            return;
          }
          
          // Para o processo quando todos os elementos foram processados
          attempts = CONFIG.maxAttempts;
        }
        
        /**
         * Observer para detectar mudanças dinâmicas no DOM
         */
        function setupMutationObserver() {
          const observer = new MutationObserver(function(mutations) {
            let shouldCheck = false;
            
            mutations.forEach(function(mutation) {
              if (mutation.type === 'childList') {
                // Verifica se novos elementos Bundle Builder foram adicionados
                mutation.addedNodes.forEach(function(node) {
                  if (node.nodeType === Node.ELEMENT_NODE) {
                    if (node.classList && node.classList.contains('bndlr-product')) {
                      shouldCheck = true;
                    } else if (node.querySelector && node.querySelector('.bndlr-product-title')) {
                      shouldCheck = true;
                    } else if (node.classList && node.classList.contains('bndlr-bundle-title')) {
                      shouldCheck = true;
                    } else if (node.querySelector && node.querySelector('.bndlr-bundle-title')) {
                      shouldCheck = true;
                    }
                  }
                });
              }
            });
            
            if (shouldCheck) {
              // Aguarda um pouco para garantir que o DOM foi totalmente atualizado
              setTimeout(processBundleElements, 100);
            }
          });
          
          // Inicia a observação
          observer.observe(document.body, {
            childList: true,
            subtree: true
          });
          
          console.log('Bundle Builder: MutationObserver configurado');
        }
        
        /**
         * Inicializa o conversor
         */
        function init() {
          // Executa imediatamente
          processBundleElements();
          
          // Configura observer para mudanças dinâmicas
          setupMutationObserver();
          
          // Executa quando o DOM estiver carregado
          if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', processBundleElements);
          }
          
          // Executa quando a página estiver totalmente carregada
          window.addEventListener('load', processBundleElements);
          
          console.log('Bundle Builder: Conversor de elementos inicializado');
        }
        
        // Inicializa quando o script carrega
        init();
        
      })();
    </script>

    {%- comment -%} Bundle Builder Selector Fix Script {%- endcomment -%}
    <script>
      /**
       * Bundle Builder Selector Fix
       * Corrige silenciosamente o erro de seletor inválido do app de bundle
       * O app tenta usar seletores com IDs temporários do jQuery (#sizzle...) que não são válidos
       */
      (function() {
        'use strict';
        
        // Intercepta querySelectorAll para corrigir seletores inválidos
        const originalQuerySelectorAll = Element.prototype.querySelectorAll;
        
        Element.prototype.querySelectorAll = function(selector) {
          try {
            // Verifica se o seletor contém um ID inválido do jQuery (sizzle)
            if (selector && typeof selector === 'string' && selector.includes('#sizzle')) {
              // Remove a parte inválida do seletor (#sizzle...)
              // O seletor provavelmente é algo como: #sizzle1768514291639 select.bndlr-select-variant...
              // Vamos extrair apenas a parte válida após o ID inválido
              const parts = selector.split(/\s+/);
              const validParts = parts.filter(part => !part.startsWith('#sizzle'));
              
              if (validParts.length > 0) {
                const correctedSelector = validParts.join(' ');
                
                // Tenta usar o seletor corrigido
                try {
                  return originalQuerySelectorAll.call(this, correctedSelector);
                } catch (e) {
                  // Se ainda falhar, tenta encontrar o elemento de outra forma
                  // Procura diretamente pelo select dentro do contexto atual
                  if (correctedSelector.includes('select.bndlr-select-variant')) {
                    const selects = originalQuerySelectorAll.call(this, 'select.bndlr-select-variant[name="variant_id"]');
                    if (selects.length > 0) {
                      // Se o seletor original incluía :selected, filtra apenas os selecionados
                      if (selector.includes(':selected') || selector.includes('option:selected')) {
                        const selectedOptions = [];
                        selects.forEach(select => {
                          const selectedOption = select.querySelector('option:checked, option[selected]');
                          if (selectedOption) {
                            selectedOptions.push(selectedOption);
                          }
                        });
                        // Cria um NodeList válido usando um fragmento temporário
                        if (selectedOptions.length > 0) {
                          const fragment = document.createDocumentFragment();
                          selectedOptions.forEach(opt => {
                            const clone = opt.cloneNode(true);
                            fragment.appendChild(clone);
                          });
                          return fragment.querySelectorAll('option');
                        }
                        return document.createDocumentFragment().querySelectorAll('*');
                      }
                      return selects;
                    }
                  }
                  
                  // Para outros seletores, tenta encontrar elementos relacionados
                  if (correctedSelector.includes('.bndlr-add-to-bundle-container')) {
                    return originalQuerySelectorAll.call(this, '.bndlr-add-to-bundle-container .quantity-input');
                  }
                  
                  // Fallback: retorna NodeList vazio
                  return document.createDocumentFragment().querySelectorAll('*');
                }
              }
            }
            
            // Se o seletor é válido, usa o método original
            return originalQuerySelectorAll.call(this, selector);
            
          } catch (error) {
            // Se houver erro, tenta usar o método original silenciosamente
            try {
              return originalQuerySelectorAll.call(this, selector);
            } catch (e) {
              // Se ainda falhar, retorna NodeList vazio
              return document.createDocumentFragment().querySelectorAll('*');
            }
          }
        };
        
        // Também intercepta querySelector para consistência
        const originalQuerySelector = Element.prototype.querySelector;
        
        Element.prototype.querySelector = function(selector) {
          try {
            if (selector && typeof selector === 'string' && selector.includes('#sizzle')) {
              const parts = selector.split(/\s+/);
              const validParts = parts.filter(part => !part.startsWith('#sizzle'));
              
              if (validParts.length > 0) {
                const correctedSelector = validParts.join(' ');
                return originalQuerySelector.call(this, correctedSelector);
              }
            }
            
            return originalQuerySelector.call(this, selector);
            
          } catch (error) {
            try {
              return originalQuerySelector.call(this, selector);
            } catch (e) {
              return null;
            }
          }
        };
        
      })();
    </script>

    {%- comment -%} Ativafit Brand Name Corrector Script {%- endcomment -%}
    <script>
      /**
       * Ativafit Brand Name Corrector
       * Corrige automaticamente "ativa fit" para "Ativafit" em todo o DOM
       * Necessário porque o conteúdo é gerado dinamicamente pelo Shopify
       */
      (function() {
        'use strict';
        
        // Configurações
        const CONFIG = {
          // Textos a serem corrigidos (case-insensitive)
          searchPatterns: [
            /ativa\s+fit/gi,
            /Ativa\s+Fit/gi,
            /ATIVA\s+FIT/gi,
            /Ativa\s+fit/gi,
            /ativa\s+Fit/gi
          ],
          // Texto de substituição
          replacement: 'Ativafit',
          // Elementos a serem ignorados
          ignoreSelectors: [
            'script',
            'style',
            'noscript',
            'meta',
            'link',
            'title',
            '[data-ativafit-corrected]' // Evita reprocessar elementos já corrigidos
          ],
          // Intervalo de verificação para conteúdo dinâmico
          checkInterval: 1000,
          // Máximo de tentativas
          maxAttempts: 30
        };
        
        let processedElements = new WeakSet();
        let attempts = 0;
        
        /**
         * Verifica se um elemento deve ser ignorado
         * @param {HTMLElement} element - Elemento a verificar
         * @returns {boolean} - true se deve ser ignorado
         */
        function shouldIgnoreElement(element) {
          if (!element || !element.tagName) return true;
          
          const tagName = element.tagName.toLowerCase();
          if (CONFIG.ignoreSelectors.includes(tagName)) return true;
          
          // Verifica se tem algum seletor de ignorar
          for (const selector of CONFIG.ignoreSelectors) {
            if (element.matches && element.matches(selector)) return true;
            if (element.closest && element.closest(selector)) return true;
          }
          
          return false;
        }
        
        /**
         * Substitui texto em um nó de texto
         * @param {Text} textNode - Nó de texto
         * @returns {boolean} - true se houve substituição
         */
        function replaceTextInNode(textNode) {
          if (!textNode || textNode.nodeType !== Node.TEXT_NODE) return false;
          
          let text = textNode.textContent;
          let originalText = text;
          let hasReplacement = false;
          
          // Aplica todas as substituições
          CONFIG.searchPatterns.forEach(pattern => {
            if (pattern.test(text)) {
              text = text.replace(pattern, CONFIG.replacement);
              hasReplacement = true;
            }
          });
          
          // Se houve substituição, atualiza o nó
          if (hasReplacement && text !== originalText) {
            textNode.textContent = text;
            return true;
          }
          
          return false;
        }
        
        /**
         * Processa um elemento e seus filhos recursivamente
         * @param {HTMLElement} element - Elemento raiz
         * @returns {number} - Número de substituições realizadas
         */
        function processElement(element) {
          if (!element || shouldIgnoreElement(element)) return 0;
          
          // Evita reprocessar elementos já processados
          if (processedElements.has(element)) return 0;
          
          let replacements = 0;
          
          try {
            // Processa nós de texto diretamente filhos
            const walker = document.createTreeWalker(
              element,
              NodeFilter.SHOW_TEXT,
              {
                acceptNode: function(node) {
                  // Ignora nós dentro de elementos que devem ser ignorados
                  let parent = node.parentElement;
                  while (parent && parent !== element) {
                    if (shouldIgnoreElement(parent)) {
                      return NodeFilter.FILTER_REJECT;
                    }
                    parent = parent.parentElement;
                  }
                  return NodeFilter.FILTER_ACCEPT;
                }
              }
            );
            
            const textNodes = [];
            let node;
            while (node = walker.nextNode()) {
              textNodes.push(node);
            }
            
            // Processa cada nó de texto
            textNodes.forEach(textNode => {
              if (replaceTextInNode(textNode)) {
                replacements++;
              }
            });
            
            // Marca o elemento como processado se houve substituições
            if (replacements > 0) {
              processedElements.add(element);
              element.setAttribute('data-ativafit-corrected', 'true');
            }
            
          } catch (error) {
            console.warn('Ativafit Corrector: Erro ao processar elemento:', error);
          }
          
          return replacements;
        }
        
        /**
         * Processa todo o documento
         * @returns {number} - Total de substituições realizadas
         */
        function processDocument() {
          let totalReplacements = 0;
          
          try {
            // Processa o body e seus filhos
            if (document.body) {
              totalReplacements += processElement(document.body);
            }
            
            // Processa elementos específicos que podem ter conteúdo dinâmico
            const dynamicSelectors = [
              'h1', 'h2', 'h3', 'h4', 'h5', 'h6',
              'p', 'span', 'div', 'a', 'li', 'td', 'th',
              '[class*="title"]',
              '[class*="name"]',
              '[class*="brand"]'
            ];
            
            dynamicSelectors.forEach(selector => {
              try {
                const elements = document.querySelectorAll(selector);
                elements.forEach(element => {
                  if (!processedElements.has(element)) {
                    totalReplacements += processElement(element);
                  }
                });
              } catch (e) {
                // Ignora erros de seletor inválido
              }
            });
            
            if (totalReplacements > 0) {
              console.log(`Ativafit Corrector: ${totalReplacements} substituição(ões) realizada(s)`);
            }
            
          } catch (error) {
            console.warn('Ativafit Corrector: Erro ao processar documento:', error);
          }
          
          return totalReplacements;
        }
        
        /**
         * Configura MutationObserver para detectar mudanças dinâmicas
         */
        function setupMutationObserver() {
          const observer = new MutationObserver(function(mutations) {
            let shouldProcess = false;
            
            mutations.forEach(function(mutation) {
              // Verifica se novos nós foram adicionados
              if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
                mutation.addedNodes.forEach(function(node) {
                  if (node.nodeType === Node.ELEMENT_NODE && !shouldIgnoreElement(node)) {
                    shouldProcess = true;
                  } else if (node.nodeType === Node.TEXT_NODE) {
                    shouldProcess = true;
                  }
                });
              }
              
              // Verifica se texto foi modificado
              if (mutation.type === 'characterData') {
                shouldProcess = true;
              }
            });
            
            if (shouldProcess) {
              // Aguarda um pouco para evitar processamento excessivo
              setTimeout(() => {
                processDocument();
              }, 100);
            }
          });
          
          // Inicia a observação
          observer.observe(document.body || document.documentElement, {
            childList: true,
            subtree: true,
            characterData: true
          });
          
          console.log('Ativafit Corrector: MutationObserver configurado');
        }
        
        /**
         * Inicializa o corretor
         */
        function init() {
          // Aguarda o DOM estar pronto
          if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
              processDocument();
              setupMutationObserver();
            });
          } else {
            // DOM já está pronto
            processDocument();
            setupMutationObserver();
          }
          
          // Processa após o carregamento completo
          window.addEventListener('load', function() {
            setTimeout(processDocument, 500);
          });
          
          // Processa periodicamente para pegar conteúdo muito dinâmico
          const intervalId = setInterval(function() {
            attempts++;
            const replacements = processDocument();
            
            // Para após várias tentativas sem encontrar nada
            if (attempts >= CONFIG.maxAttempts && replacements === 0) {
              clearInterval(intervalId);
            }
          }, CONFIG.checkInterval);
          
          console.log('Ativafit Corrector: Inicializado');
        }
        
        // Inicializa quando o script carrega
        init();
        
      })();
    </script>
  </body>
</html>