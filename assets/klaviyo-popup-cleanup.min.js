(function() { 'use strict'; function cleanEmptyH1Tags() { const klaviyoH1Tags = document.querySelectorAll('.klaviyo-form h1, [data-testid="klaviyo-form-UbasUU"] h1, .klaviyo-close-form ~ form h1'); klaviyoH1Tags.forEach(function(h1Tag) { const textContent = h1Tag.textContent.trim(); const innerHTML = h1Tag.innerHTML.trim(); const isEmpty = textContent === '' || textContent === '&nbsp;' || innerHTML === '' || innerHTML === '&nbsp;' || innerHTML === '<!--StartFragment-->' || innerHTML === '<!--EndFragment-->' || innerHTML.includes('<!--StartFragment-->') || innerHTML.includes('<!--EndFragment-->'); if (isEmpty) { console.log('Removendo tag H1 vazia:', h1Tag); h1Tag.remove(); } }); } function observeKlaviyoPopup() { const observer = new MutationObserver(function(mutations) { mutations.forEach(function(mutation) { if (mutation.type === 'childList') { mutation.addedNodes.forEach(function(node) { if (node.nodeType === 1 && (node.classList.contains('klaviyo-form') || node.querySelector && node.querySelector('.klaviyo-form'))) { console.log('Popup Klaviyo detectado, limpando tags H1 vazias...'); setTimeout(function() { cleanEmptyH1Tags(); }, 100); } }); } }); }); observer.observe(document.body, { childList: true, subtree: true }); } function cleanExistingH1Tags() { cleanEmptyH1Tags(); } if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', function() { cleanExistingH1Tags(); observeKlaviyoPopup(); }); } else { cleanExistingH1Tags(); observeKlaviyoPopup(); } window.addEventListener('load', function() { setTimeout(function() { cleanEmptyH1Tags(); }, 1000); }); setInterval(function() { cleanEmptyH1Tags(); }, 2000); console.log('Script de limpeza de tags H1 vazias do Klaviyo carregado!'); })();