(function() { 'use strict'; function cleanEmptyH1Tags() { const klaviyoForms = document.querySelectorAll('[data-testid="klaviyo-form-UbasUU"], .klaviyo-form, [class*="klaviyo"]'); klaviyoForms.forEach(form => { const h1Elements = form.querySelectorAll('h1'); h1Elements.forEach(h1 => { const textContent = h1.textContent.trim(); if (textContent === '' || textContent === '&nbsp;' || textContent === '\u00A0') { console.log('Removendo H1 vazio:', h1); h1.remove(); } else if (textContent.includes('<!--StartFragment-->') || textContent.includes('<!--EndFragment-->')) { console.log('Removendo H1 com comentários:', h1); h1.remove(); } else if (textContent.replace(/<!--.*?-->/g, '').trim() === '') { console.log('Removendo H1 com apenas comentários:', h1); h1.remove(); } }); }); } function cleanKlaviyoPopupH1s() { const popupDialog = document.querySelector('[role="dialog"][aria-label="POPUP Form"]'); if (popupDialog) { const h1Elements = popupDialog.querySelectorAll('h1'); h1Elements.forEach(h1 => { const textContent = h1.textContent.trim(); if (textContent === '' || textContent === '&nbsp;' || textContent === '\u00A0' || textContent.includes('<!--StartFragment-->') || textContent.includes('<!--EndFragment-->') || textContent.replace(/<!--.*?-->/g, '').trim() === '') { console.log('Removendo H1 vazio do popup:', h1); h1.remove(); } }); } } function cleanSpecificH1s() { const specificIds = [ 'rich-text-01K5ZS5PXXF6Y2Y4ZRKK2KV3VV', 'rich-text-01K5ZS5PY3XVRN8EGSZ8S839H2', 'rich-text-01K5ZS5PYNS2WD6PMJQ6ZYANFN' ]; specificIds.forEach(id => { const element = document.getElementById(id); if (element) { const h1Elements = element.querySelectorAll('h1'); h1Elements.forEach(h1 => { const textContent = h1.textContent.trim(); if (textContent === '' || textContent === '&nbsp;' || textContent === '\u00A0' || textContent.includes('<!--StartFragment-->') || textContent.includes('<!--EndFragment-->') || textContent.replace(/<!--.*?-->/g, '').trim() === '') { console.log(`Removendo H1 vazio do elemento ${id}:`, h1); h1.remove(); } }); } }); } function performCleanup() { console.log('Iniciando limpeza de H1s vazios do Klaviyo...'); cleanEmptyH1Tags(); cleanKlaviyoPopupH1s(); cleanSpecificH1s(); console.log('Limpeza de H1s vazios concluída!'); } if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', performCleanup); } else { performCleanup(); } const observer = new MutationObserver(function(mutations) { mutations.forEach(function(mutation) { if (mutation.type === 'childList') { mutation.addedNodes.forEach(function(node) { if (node.nodeType === 1) { if (node.querySelector && ( node.querySelector('[data-testid="klaviyo-form-UbasUU"]') || node.querySelector('[role="dialog"][aria-label="POPUP Form"]') || node.classList.contains('klaviyo-form') )) { console.log('Popup do Klaviyo detectado, executando limpeza...'); setTimeout(performCleanup, 100); } } }); } }); }); observer.observe(document.body, { childList: true, subtree: true }); setInterval(performCleanup, 2000); window.cleanKlaviyoH1s = performCleanup; console.log('Script de limpeza de H1s do Klaviyo carregado!'); })();