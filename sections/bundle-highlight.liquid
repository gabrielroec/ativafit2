{%- style -%}
  #bundle-highlight-{{ section.id }} {
    padding: 60px 0;
    background: {{ section.settings.background_color }};
    width: 100%;
  }

  #bundle-highlight-{{ section.id }}
  .bundle-highlight__container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0;
    text-align: left;
  }

  #bundle-highlight-{{ section.id }}
  .bundle-highlight__title {
    font-family: 'Barlow'
    , sans-serif !important;
    font-weight: 700 !important;
    font-size: {{ section.settings.title_size_desktop }}px;
    line-height: 100%;
    letter-spacing: 0;
    color: {{ section.settings.title_color }};
    margin: 0 0 30px;
  }

  #bundle-highlight-{{ section.id }}
  .bundle-highlight__description {
    font-family: 'Barlow'
    , sans-serif !important;

    font-size: {{ section.settings.text_size_desktop }}px;
    line-height: 100%;
    letter-spacing: 0;
    color: {{ section.settings.text_color }};
    margin: 0;
  }

  @media (max-width: 768px) {
    #bundle-highlight-{{ section.id }} {
      padding: 40px 0;
    }

    #bundle-highlight-{{ section.id }}
    .bundle-highlight__title {
      font-size: {{ section.settings.title_size_mobile }}px;
      margin-bottom: 20px;
    }

    #bundle-highlight-{{ section.id }}
    .bundle-highlight__description {
      font-size: {{ section.settings.text_size_mobile }}px;
    }
  }

  /* Force margin-top 0 for all bundler containers */
  .bundler-target-element[data-bndlr-ccid] .bndlr-container {
    margin-top: 0 !important;
  }
{%- endstyle -%}

<section class="bundle-highlight" id="bundle-highlight-{{ section.id }}">
  <div class="bundle-highlight__container">
    {%- if section.settings.title != blank -%}
      <h2 class="bundle-highlight__title">{{ section.settings.title }}</h2>
    {%- endif -%}

    {%- if section.settings.description != blank -%}
      <div class="bundle-highlight__description">
        {{ section.settings.description }}
      </div>
    {%- endif -%}
  </div>
</section>

<script>
  // Global script - only run once
  if (!window.bundleColorsApplied) {
  window.bundleColorsApplied = true;
  
  document.addEventListener('DOMContentLoaded', function() {
    setTimeout(function() {
      // Define the exact app IDs in order and their colors
      const appConfigs = [
        { id: '1757329073fd8b0d41', color: '#ffffff' },    // App 1 - White
        { id: 'apps_UXdtyL', color: '#fcebdf' },          // App 2 - Special color
        { id: 'apps_jgRAxr', color: '#ffffff' },          // App 3 - White  
        { id: 'apps_T84XwQ', color: '#fcebdf' }           // App 4 - Special color
      ];
      
      // Apply colors to each specific app
      appConfigs.forEach(function(config, index) {
        const appSection = document.querySelector('[id*="' + config.id + '"]');
        if (appSection) {
          // Force the background color on main section
          appSection.style.setProperty('background', config.color, 'important');
          appSection.style.setProperty('background-color', config.color, 'important');
          
          // Force on container
          const container = appSection.querySelector('.container');
          if (container) {
            container.style.setProperty('background', config.color, 'important');
            container.style.setProperty('background-color', config.color, 'important');
          }
          
          // Force on bundler container - but keep products white
          const bundlerContainers = appSection.querySelectorAll('.bndlr-container');
          bundlerContainers.forEach(function(bundlerContainer) {
            bundlerContainer.style.setProperty('background', config.color, 'important');
            bundlerContainer.style.setProperty('background-color', config.color, 'important');
            
            // Keep individual products white
            const products = bundlerContainer.querySelectorAll('.bndlr-product');
            products.forEach(function(product) {
              product.style.setProperty('background', '#ffffff', 'important');
              product.style.setProperty('background-color', '#ffffff', 'important');
              
              // Force white on all product children too
              const productChildren = product.querySelectorAll('*');
              productChildren.forEach(function(child) {
                child.style.setProperty('background', '#ffffff', 'important');
                child.style.setProperty('background-color', '#ffffff', 'important');
              });
            });
          });
          
          console.log('Applied', config.color, 'to app', index + 1, config.id, '(products kept white)');
        }
      });
    }, 200);
  });
  }
</script>

{% schema %}
  {
    "name": "Bundle Highlight",
    "settings": [
      {
        "type": "header",
        "content": "Content"
      },
      {
        "type": "text",
        "id": "title",
        "label": "Title",
        "default": "1. The Complete Self-Care Powerhouse"
      },
      {
        "type": "richtext",
        "id": "description",
        "label": "Description",
        "default": "<p>Your perfect starting point for total self-improvement. Sculpt your body with a pro-grade weight set, then recover faster with the massage gun. This bundle is a complete investment in your well-being—from building strength to mindful recovery.</p>"
      },
      {
        "type": "header",
        "content": "Font Sizes - Desktop"
      }, {
        "type": "range",
        "id": "title_size_desktop",
        "label": "Title size (Desktop)",
        "min": 20,
        "max": 80,
        "step": 1,
        "unit": "px",
        "default": 40
      }, {
        "type": "range",
        "id": "text_size_desktop",
        "label": "Text size (Desktop)",
        "min": 14,
        "max": 40,
        "step": 1,
        "unit": "px",
        "default": 26
      }, {
        "type": "header",
        "content": "Font Sizes - Mobile"
      }, {
        "type": "range",
        "id": "title_size_mobile",
        "label": "Title size (Mobile)",
        "min": 18,
        "max": 60,
        "step": 1,
        "unit": "px",
        "default": 28
      }, {
        "type": "range",
        "id": "text_size_mobile",
        "label": "Text size (Mobile)",
        "min": 12,
        "max": 30,
        "step": 1,
        "unit": "px",
        "default": 18
      }, {
        "type": "header",
        "content": "Colors"
      }, {
        "type": "color",
        "id": "background_color",
        "label": "Background color",
        "default": "#ffffff"
      }, {
        "type": "color",
        "id": "title_color",
        "label": "Title color",
        "default": "#333333"
      }, {
        "type": "color",
        "id": "text_color",
        "label": "Text color",
        "default": "#333333"
      }
    ],
    "presets": [
      {
        "name": "Bundle Highlight",
        "settings": {
          "title": "1. The Complete Self-Care Powerhouse",
          "description": "<p>Your perfect starting point for total self-improvement. Sculpt your body with a pro-grade weight set, then recover faster with the massage gun. This bundle is a complete investment in your well-being—from building strength to mindful recovery.</p>",
          "title_size_desktop": 40,
          "text_size_desktop": 26,
          "title_size_mobile": 28,
          "text_size_mobile": 18,
          "background_color": "#ffffff",
          "title_color": "#333333",
          "text_color": "#333333"
        }
      }
    ]
  }
{% endschema %}